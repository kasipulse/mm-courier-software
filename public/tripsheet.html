<!-- keep your full <html> and <head> section as is -->

<!-- inside your <table> thead -->
<thead>
  <tr>
    <th>Waybill</th>
    <th>Tracking #</th>
    <th>Customer</th>
    <th>Content</th>
    <th>Status</th>
    <th>Received Date</th>
    <th>POD</th> <!-- ðŸ‘ˆ Added POD column -->
  </tr>
</thead>

<!-- update JS below inside <script> -->

<script>
  document.getElementById('driverName').textContent = driverName;

  async function fetchTrips() {
    try {
      const res = await fetch('/api/parcels');
      const parcels = await res.json();
      const tableBody = document.querySelector('#tripSheetTable tbody');
      tableBody.innerHTML = '';

      const assigned = parcels.filter(p => p.driver_name === driverName);

      if (assigned.length === 0) {
        const row = tableBody.insertRow();
        const cell = row.insertCell();
        cell.colSpan = 7;
        cell.textContent = 'No parcels assigned.';
        return;
      }

      assigned.forEach(parcel => {
        const row = tableBody.insertRow();
        row.innerHTML = `
          <td>${parcel.waybill_number || '-'}</td>
          <td>${parcel.tracking_number}</td>
          <td>${parcel.customer || '-'}</td>
          <td>${parcel.content || '-'}</td>
          <td>${parcel.status}</td>
          <td>${parcel.received_date ? parcel.received_date.slice(0, 10) : '-'}</td>
          <td>
            ${parcel.pod_url ? 
              `<a href="${parcel.pod_url}" target="_blank">View POD</a>` : 
              `<a href="/upload-pod.html?parcelId=${parcel.id}">Upload POD</a>`}
          </td>
        `;
      });
    } catch (err) {
      console.error('Failed to fetch trip sheet', err);
    }
  }

  function logout() {
    localStorage.removeItem('mmcourier_loggedin');
    localStorage.removeItem('mmcourier_driver');
    window.location.href = '/login.html';
  }

  fetchTrips();
</script>
